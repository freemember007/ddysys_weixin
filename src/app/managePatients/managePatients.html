<ion-view view-title="患者" hide-back-button="true" ng-init="init()" >

  <div
    class="tabs-striped tabs-top tabs-background-light tabs-color-positive">
    <div class="tabs" style="top:0">
      <a class="tab-item active" style="color:#666;font-size:16px"  ui-sref="tab.managePatients">患者会话</a>
      <a class="tab-item" style="color:#666;font-size:16px"  ui-sref="tab.patients">患者管理</a>
    </div>
  </div>
  <ion-content class="has-header padding-top" style="bottom:48px;background-color:#f4f4f4">

    <ion-refresher pulling-text="下拉刷新..." on-refresh="init()">
    </ion-refresher>

    <div class="card" ng-if="!userMessages[0]">
      <div class="item item-text-wrap">
        暂无患者沟通。
      </div>
    </div>
    <div class="list">
      <style>
        .home_patients_list_avatar {
          -webkit-border-radius: 50%;
          -moz-border-radius: 50%;
          border-radius: 50%;;
        }
      </style>
      <a class="item item-avatar has-badge" ng-repeat="userMessage in userMessages" ui-sref="messages({patientId: userMessage.patId, patient:userMessage})" ng-click="changeBadge($index, userMessage.unreadCount)">
        <img class='home_patients_list_avatar' ng-src="{{userMessage.patFaceUrl}}">
        <span class="badge badge-assertive bold" ng-if="userMessage.unreadCount">{{userMessage.unreadCount}}</span>
        <h2 class="bold">{{userMessage.patName}}</h2>
        <p style="font-size:16px; color:#999">{{userMessage.msgContent}}</p>
      </a>
    </div>
  </ion-content>

</ion-view>